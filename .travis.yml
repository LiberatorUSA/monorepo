language: java
  
branches:
  only:
  - master

stages:
  - name: controller
    if: type = push
  - name: test
    if: type = api

jobs:
  - stage: controller
  - name: build
    script: tools/ci/core/build.sh
  
  - stage: test
  
  - name: server
    before_script: cd apps/server
    script: ./gradlew clean build

  - name: client
    before_script: cd apps/client
    script: ./gradlew clean build
